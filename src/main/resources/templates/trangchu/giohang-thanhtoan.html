

<div class="container mt-5" style="padding-top: 180px;">
    <div class="row">
        <!-- Form Đặt Hàng -->
        <div class="col-lg-6 mb-4">
            <form method="post" action="/giohang/luu" th:object="${dh}" class="bg-light p-3 rounded shadow" style="margin-top: 100px; max-width: 600px; margin:auto;">
                <h4 class="mb-3">Thông Tin Khách Hàng</h4>
                <div class="row mb-2">
                    <div class="col-12 mb-3">
                        <label for="tenDayDu" class="form-label">Họ Tên</label>
                        <input type="text" class="form-control" id="tenDayDu" name="tenDayDu" placeholder="Nhập họ tên quý khách" required>
                    </div>
                    <div class="col-12 mb-3">
                        <label for="diaChi" class="form-label">Địa Chỉ</label>
                        <input type="text" class="form-control" id="diaChi" name="diaChi" placeholder="Số nhà - Quận/Huyện - Thành phố" required>
                    </div>
                    <div class="col-6 mb-3">
                        <label for="phone" class="form-label">Điện Thoại</label>
                        <input type="tel" class="form-control" id="phone" name="phone" placeholder="Nhập số điện thoại" required title="Chỉ nhập số"
                               oninvalid="this.setCustomValidity('Vui lòng chỉ nhập số vào ô điện thoại.')"
                               oninput="this.setCustomValidity('')">
                    </div>
                    <div class="col-6 mb-3">
                        <label for="email" class="form-label">Email</label>
                        <input type="email" class="form-control" name="email" placeholder="Nhập Email Quý Khách" required 
                               oninvalid="this.setCustomValidity('Vui lòng nhập địa chỉ email hợp lệ.')"
                               oninput="this.setCustomValidity('')">
                    </div>
                </div>

                <div class="mb-3">
                    <label>Phương thức thanh toán</label>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="paymentMethod" id="bankTransfer" value="bankTransfer" checked>
                        <label class="form-check-label" for="bankTransfer">Chuyển khoản ngân hàng</label>
                        <p class="small">Vui lòng chuyển khoản vào tài khoản ngân hàng của chúng tôi.</p>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="paymentMethod" id="cashOnDelivery" value="cashOnDelivery">
                        <label class="form-check-label" for="cashOnDelivery">Trả tiền mặt khi nhận hàng</label>
                    </div>
                </div>
            
                <div class="mb-3">
                    <label for="ghiChu" class="form-label">Ghi Chú</label>
                    <input type="text" class="form-control" id="ghiChu" name="ghiChu" placeholder="Ghi Chú Đơn Hàng">
                </div>
            
                <input type="hidden" id="tongTien" name="tongTien" th:value="${#numbers.formatDecimal(tongGiaTriGioHang, 0, 0)}">
                <input type="hidden" id="maKhachHang" name="maKhachHang" th:value="${maKhachHang}">
                
                <div class="d-flex justify-content-between">
                    <button class="btn btn-outline-dark w-50 mr-2" style="margin-left: -5px;"
                    type="button" onclick="window.location.href='/trangchu'"> Tiếp tục mua hàng</button>
                    <button type="submit" style="margin-left: 5px;" class="btn btn-success w-50">Đặt Hàng</button>
                </div>
            </form>
        </div>

        <!-- Bảng Các Sản Phẩm -->
        <div class="col-lg-6">
            <table id="cart" class="table table-striped table-hover table-condensed table-custom">
                <thead>
                    <tr>
                        <th scope="col">Các Sản Phẩm</th>
                        <th scope="col">Tên Sản Phẩm</th>
                        <th scope="col">Đơn Giá</th>
                        <th scope="col">Số Lượng</th>
                        <th scope="col">Tổng Tiền</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="sp : ${cartData}">
                        <td class="align-middle">
                            <img th:src="${sp.get('anh')}" alt="">
                        </td>
                        <td class="align-middle">
                            <h5>
                                <a href="#" th:text="${sp.get('ten')}"></a>
                            </h5>
                        </td>
                        <td class="align-middle" th:text="${sp.get('donGiaVi')}"></td>
                        <td class="align-middle">
                            <input type="number" class="form-control text-center" 
                                   th:value="${sp.get('soluong')}" 
                                   min="1" max="10" step="1" required>
                        </td>
                        <td class="align-middle text-center" th:text="${sp.get('thanhTien')} + ' đ'"></td>
                    </tr>
                </tbody>
                <tfoot>
                    <tr>
                        <td colspan="4" class="text-right">Tổng tiền</td>
                        <td th:text="${tongGiaTriGioHangVi} + ' đ'"></td>
                    </tr>
                </tfoot>
            </table>
        </div>
    </div>
</div>

<!-- <script>
     document.getElementById('dienThoai').addEventListener('input', function () {
        const value = this.value;
        if (!/^\d*$/.test(value)) {
            this.setCustomValidity('Vui lòng chỉ nhập số.');
            this.classList.add('is-invalid');
        } else {
            this.setCustomValidity('');
            this.classList.remove('is-invalid');
        }
    });
</script> -->

<style>
    .table-custom {
    background-color: #f8f9fa; /* Màu nền tương tự form */
    padding: 15px;
    border-radius: 8px;
    box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.1);
}

.table-custom th,
.table-custom td {
    vertical-align: middle;
}

.table-custom img {
    width: 80px;
    height: 80px;
    object-fit: cover;
    border-radius: 8px;
}

</style>
