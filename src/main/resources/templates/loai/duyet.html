<div class="main-panel">
  <div class="content-wrapper">
    <div class="row" id="proBanner">
      <div class="col-12">
      </div>
    </div>


    <!-- Page Header -->
    <div class="d-xl-flex justify-content-between align-items-start">
      <h2 class="text-dark font-weight-bold mb-2">Danh Sách Loại Sản Phẩm </h2>
      <div class="d-sm-flex justify-content-xl-between align-items-center mb-2"></div>
    </div>

    <!-- form them -->
    <div class="modal" id="modalThem">
      <div class="modal-dialog modal-xl">
        <div class="modal-content">
          <div class="modal-body p-0">
            <i th:replace="loai/them.html"></i>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-danger" data-dismiss="modal"><i class="bi-x"></i>Close</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Main Content -->
    <div class="container" style="margin-top: 20px;">
      <!-- Add Employee Button -->
      <a href="#" th:href="@{/qdl/loai/them}"></a>
      <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#modalThem">
        <i class="bi-plus-circle"></i> Thêm Loại Sản Phẩm
      </button>

      <!-- Add Employee Modal Script -->
      <script>
        $('#modalThem').on('show.bs.modal', function (e) {
          $(e.currentTarget).find('form').attr('action', '/qdl/loai/them');
        });
      </script>

      <!-- Filter Button -->
      <button class="btn btn-success" type="button" data-toggle="collapse" data-target="#filterBoxCollapsible">
        <i class="bi-filter"></i> Lọc
      </button>

      <!-- Employee Table -->
      <table class="table table-striped table-bordered mt-3">
        <thead class="thead-dark">
          <tr>
            <th>Id</th>
            <th>Tên Loại</th>
            <th>Ảnh</th>
            <th>Thứ Tự</th>
            <th>Cho Phép</th>
            <th>Nổi Bật</th>
            <th>Top</th>
            <th>Ngày Tạo</th>
            <th>Ngày Sửa</th>
            <!-- <th>Mô Tả (dài quá nên không hiện lên)</th> -->
            <th>Action</th>
          </tr>
        </thead>

        <tbody>

          <tr th:each="dl : ${ds}">
            <td th:text="${dl.id}"></td>

            <td th:text="${dl.ten}"></td>
            <td>
              <img th:src="${dl.anh}" style="height: 60px; width: 45px;" />
            </td>
            <td th:text="${dl.thuTu}"></td>
            <!-- <td th:text="${dl.link}"></td> -->
            <td>
              <div th:if="${dl.choPhep}">
                <span class="ui label green" th:text="${dl.choPhepVi}"></span>
              </div>
              <div th:unless="${dl.choPhep}">
                <span class="ui label red" th:text="${dl.choPhepVi}"></span>
              </div>
            </td>

            <td>
              <div th:if="${dl.noiBat}">
                <span class="ui label green" th:text="${dl.noiBatVi}"></span>
              </div>
              <div th:unless="${dl.noiBat}">
                <span class="ui label red" th:text="${dl.noiBatVi}"></span>
              </div>
            </td>

            <td>
              <div th:if="${dl.top}">
                <span class="ui label green" th:text="${dl.topVi}"></span>
              </div>
              <div th:unless="${dl.top}">
                <span class="ui label red" th:text="${dl.topVi}"></span><!--đừng gõ kí tự trắng, mà phải là No top-->
              </div>
            </td>


            <td th:text="${dl.ngayTaoVi}"></td>
            <td th:text="${dl.ngaySuaVi}"></td>
            <td>
              <a th:href="@{/qdl/loai/xem/{id}(id=${dl.id})}" class="ui button positive">
                <i class="icon eye"></i>Xem</a> <!-- /loai/xem/3 -->
              &nbsp;
              <a th:href="@{/qdl/loai/sua(id=${dl.id})}" class="ui button yellow">
                <i class="icon pencil"></i>Sửa</a> <!-- /loai/sua?id=3 -->
              &nbsp;
              <a th:href="@{/qdl/loai/xoa(id=${dl.id})}" class="ui button negative">
                <i class="icon trash"></i>Xoá</a><!-- /loai/xoa?id=3 -->
            </td>
          </tr>
        </tbody>



        <tfoot>
          <tr>
            <th colspan="11" style="text-align: center;font-weight: bold">
              Tìm thấy <span th:text="${ds.size()}">xxx</span> bản ghi
            </th>
          </tr>
        </tfoot>

        </tfoot>

      </table>

      <script>
        $(function () {
          $.contextMenu({
            selector: 'table.bs4 tr',
            callback: function (key, options) {
              rowId = $(this).data('id');

              var m = "clicked: " + key;
              window.console && console.log(m + rowId) || alert(m + rowId);

            },
            items: {
              add: {
                name: "Thêm (Add)",
                icon: "fa-plus",
                callback: function (itemKey, opt, e) {
                  $.get("/qdl/loai/ajax/modal",
                    content => {
                      $(content).modal();
                      $('.HtmlEditor').summernote();
                    })
                }
              },
              edit: {
                name: "Sửa (Edit)",
                icon: "fa-pencil",
                callback: function (itemKey, opt, e) {
                  rowId = $(this).data('id');
                  $.get("/qdl/loai/ajax/modal?id=" + rowId,
                    content => {
                      $(content).modal();
                      $('.HtmlEditor').summernote();
                    })
                }
              },
              delete: {
                name: "Xóa (Delete)",
                icon: "fa-trash",
                callback: function (itemKey, opt, e) {
                  rowId = $(this).data('id');
                  rowTen = $(this).data('ten');
                  $('#modalXoa').modal();

                  $('#modalXoa input[name="id"]').val(rowId);

                  $('#modalXoa #textXacNhanXoa').text(`Bạn có chắc muốn xóa bản ghi có mã định danh là ${rowId} (${rowTen}) ?`);

                }
              },
              details: {
                name: "Xem Chi Tiết",
                icon: "fa-eye",
                callback: function (itemKey, opt, e) {
                  rowId = $(this).data('id');
                  $('#modalXem').modal();
                  $('#modalXem .modal-body').load("/qdl/loai/xem-ajax/" + rowId);
                }
              },
              "sep1": "---------",
              "cut": {
                name: "Cut", icon: "cut", callback: function (itemKey, opt, e) {
                  var m = "Đang xây dựng chức năng Cut bản ghi";
                  window.console && console.log(m) || alert(m);

                  return false;
                }
              },
            }
          });

          $('table.bs4 tr').on('contextmenu', function (e) {
            console.log('Bạn đã bấm vào một item trên menu ngữ cảnh: ', this);
          })
        });
      </script>
    </div>
  </div>
  <!--Phân Trang Thật: bs4-->
<div style="overflow: auto;" th:if="${currentPage != null and totalPages != null and totalItems != null}">
  <!--Báo Cáo Phân Trang-->
  <nav class="float-left">
    <ul class="pagination">
      <li>
        Trang số [[${currentPage}]] trên [[${totalPages}]] (tổng số: [[${totalItems}]] phần tử) &nbsp;
      </li>
    </ul>
  </nav>

  <!--Nút Phân Trang-->
  <nav class="float-right">
    <ul class="pagination justify-content-center">
      <!-- Trang đầu: First, kí hiệu: |< -->
      <li class="page-item" th:classappend="${currentPage <= 1} ? 'disabled' : ''">
        <a class="page-link" th:href="@{${linkPage}+1}">Đầu</a>
      </li>

      <!-- Trang trước đó: Previous, kí hiệu: [<<] -->
      <li class="page-item" th:classappend="${currentPage <= 1} ? 'disabled' : ''">
        <a class="page-link" th:href="@{${linkPage} + ${currentPage > 1 ? currentPage - 1 : 1}}">
          <i class="dripicons-chevron-left"></i>
        </a>
      </li>

      <!-- Trang đầu tiên có đánh số: [1]-->
      <li class="page-item" th:classappend="${currentPage == 1} ? 'active' : ''">
        <a class="page-link" th:href="@{${linkPage}+1}">1</a>
      </li>

      <!-- Hiển thị "..." nếu cần và tổng số trang lớn hơn 2 -->
      <li class="page-item" th:if="${totalPages > 2 and currentPage > 4}">
        <span class="page-link">...</span>
      </li>

      <!-- Các trang giữa [j][q][k] -->
      <li class="page-item"
        th:each="i : ${#numbers.sequence(
          currentPage > 3 ? currentPage - 1 : 2, 
          currentPage < totalPages - 2 ? currentPage + 1 : totalPages - 1
        )}"
        th:classappend="${currentPage == i} ? 'active' : ''" 
        th:if="${totalPages > 2 and i > 1 and i < totalPages}">
        <a class="page-link" th:href="@{${linkPage} + ${i}}">[[${i}]]</a>
      </li>

      <!-- Hiển thị "..." nếu cần và tổng số trang lớn hơn 2 -->
      <li class="page-item" th:if="${totalPages > 2 and currentPage < totalPages - 3}">
        <span class="page-link">...</span>
      </li>

      <!-- Trang cuối [N] -->
      <li class="page-item" th:classappend="${currentPage == totalPages} ? 'active' : ''" th:if="${totalPages > 1}">
        <a class="page-link" th:href="@{${linkPage} + ${totalPages}}">[[${totalPages}]]</a>
      </li>

      <!-- Trang tiếp theo: Next, kí hiệu: [>>] -->
      <li class="page-item" th:classappend="${currentPage >= totalPages} ? 'disabled' : ''">
        <a class="page-link" th:href="@{${linkPage} + ${currentPage < totalPages ? currentPage + 1 : totalPages}}">
          <i class="dripicons-chevron-right"></i>
        </a>
      </li>

      <!-- Trang chặn cuối, kí hiệu: >| -->
      <li class="page-item" th:classappend="${currentPage >= totalPages} ? 'disabled' : ''">
        <a class="page-link" th:href="@{${linkPage} + ${totalPages}}">Cuối</a>
      </li>
    </ul>
  </nav>
</div>

<link href="https://cdn.jsdelivr.net/npm/dripicons@2.0.0/webfont/webfont.min.css" rel="stylesheet">


</div>